<!-- new -->

{% extends 'index.html' %}

{% block stylingblock %}

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap Library Plugin -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <!-- Link to static/view_maps_stylesheet.css -->
    <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='Stylesheets/view_maps_stylesheet.css') }}">

    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="/resources/demos/style.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <style>
        #filter_div{
            padding: 5px;
            width: 40%;
            border-radius: 5px;
            text-align: center;
            border: 1px solid;
            margin-right: 25%;
            margin-left: 25%;
        }
        #errdiv{
            height: 50%;
            width: 50%;
            border: 1px solid grey;
            border-radius: 5px;
            margin: auto;
            margin-top: 5%;
            text-align: center;
        }

        #errtxt{
            margin-top: 10%;
            font-size: 1.5em;
        }

    </style>

    <script>
        $( function() {
        $( "#datepicker" ).datepicker();
        } );
    </script>

{% endblock %}

{% block content %}

    <div id="filter_div">
        <form id="form" action="/filter" method="post">
            <legend> SEARCH</legend>
            <div class="form-group">
                <div class="form-group">
                    <input name="title" type="title" class="form-control" id="title" placeholder="Search by Map Title" >
                </div>
                <div class="form-group">
                    <input name="creater" type="creater" class="form-control" id="creater" placeholder="Search by Map Creater" >
                </div>
                <div class="form-group">
                    <input class="form-control" id="datepicker" name="datepicker" placeholder="Search by Map Expiry Date: MM/DD/YYYY" type="text"/>
                </div>
                <div class="input-group">
                    <button type="submit" id="btn" class="btn btn-success">Search</button> &nbsp
                    <button type="button" id="cancelbtn" onclick="location.href='/showmaps'" class="btn btn-danger">showall</button>
                </div>
            </div>
        </form>
    </div>

    <div class="container">

        {% for map in maps %}

            <div class="map_box">
                <img class="static_map_box img-thumbnail img-responsive"  src="https://maps.googleapis.com/maps/api/staticmap?center={{ map.center }}&zoom={{ map.zoom }}&size=400x400&key=AIzaSyACs8v_iZ7Y9-XS3KmTOL_JHvYGkmddERY"/>

                <div class="btn-group btn-group-justified">
                    <a href="/EditMap?mapid={{ map.mapid }}" class="btn btn-primary">Ã…pne</a>
                    <a href="/ViewMapResult?mapid={{ map.mapid }}" class="btn btn-success">Analyser</a>
                </div>

                <div class="btn-group btn-group-justified">
                    {% if map.Can_Update_Map %}
                        <a href="/UpdateMapDetails?mapid={{ map.mapid }}" class="btn btn-warning">Rediger</a>
                    {% endif %}
                    <a href="/feedso/{{ map.mapid }}" class="btn btn-info">Tilbakemelding</a>
                </div>

                <div class="map_details_box">
                    <p><strong>Laget av: </strong>{{ map.creater }}</p>
                    <p><strong>Tittel: </strong>{{ map.title }}</p>
                    <p><strong>Utstedet den: </strong>{{ map.issuedate }}</p>
                    <p><strong>Gyldig til: </strong>{{ map.expirydate }}</p>
                    <p><strong>Beskrivelse: </strong>{{ map.description }}</p>
                </div>
            </div>

        {% endfor %}

        {% if not maps %}
            <div id="errdiv"class="alert alert-danger">
                <p id="errtxt">{{ session.get('err') }}</p>
            </div>
        {% endif %}

    </div>

{% endblock %}