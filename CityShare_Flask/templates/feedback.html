{% extends "index.html" %}
{% block stylingblock %}
    <!-- Link to static/stylesheets/feedback_stylesheet.css -->

    <style>
    p {
        white-space: pre-wrap;
        font-size: inherit;
        color: inherit;
        border: initial;
        padding: initial;
        font-family: inherit;
    }
    </style>


    <script>
        $(document).ready(function(){
            $("#add_feedback_btn").click(function(){
                $.post("/FeedbackArena",
                {
                  Map_ID: {{ Map_ID }},
                  Content: $('#feedback_box').val()
                },
                function(data,status){
                    if (data != "Failed") {

                        var d = new Date();
                        month = (d.getMonth()+1)
                        if (month < 10) month = "0"+month
                        now = d.getFullYear()+"-"+month+"-"+d.getDate()+" "
                            +d.getHours()+"-"+d.getMinutes()+"-"+d.getSeconds();

                        var element = "<li class=\"list-group-item\">\n" +
                                        "<div>\n" +
                                        "<p><strong>"+data+" &nbsp</strong><span>"+now+"</span></p>\n" +
                                        "<p>"+$('#feedback_box').val();+"</p>\n" +
                                        "</div>\n" +
                                        "</li>";

                        $('#feedback_list').prepend(element);
                        $('#feedback_box').val("");

                    }
                    else {
                        alert("Noe feil har skjedd, pr√∏v igjen");
                    }
                });
            });
        });
    </script>

{% endblock %}

{% block content %}

    <div class="container">

        <div class="form-group">
          <label for="comment">Din Tilbakemelding:</label>
          <textarea class="form-control" id="feedback_box" rows="5" id="comment"></textarea>
        </div>

        <button type="button" id="add_feedback_btn" class="btn btn-success btn-block">Send Tilbakemedling</button>

        <br>

        <ul class="list-group" id="feedback_list">
        {% for feedback in feedbacks %}

            <li class="list-group-item">
              <div>
                  <p><strong>{{ feedback.writer }} &nbsp</strong><span>{{ feedback.date_and_time }}</span></p>
                  <p>{{ feedback.content }}</p>
              </div>
            </li>

        {% endfor %}
        </ul>

    </div>

{% endblock %}